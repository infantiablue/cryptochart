import{r as e,a as t}from"./vendor.de62f314.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const r=new URL(e,location),c=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,l)=>{const s=new URL(e,r);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const n=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),m=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){l(new Error(`Failed to import: ${e}`)),c(m)},onload(){a(self[t].moduleMap[s]),c(m)}});document.head.appendChild(m)})),self[t].moduleMap={}}}("/assets/");const a=async e=>{let t=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok){const e=`An error has occured: ${t.status}`;throw new Error(e)}return t.json()},r=({upTrend:t,latestPrice:r,fluctuation:c})=>{const[l,s]=e.useState({}),[n,m]=e.useState({});return e.useState({}),e.useEffect((()=>{console.log("calculating ..."),a("https://us-central1-techika.cloudfunctions.net/rates").then((e=>{let t={};for(const[a,r]of Object.entries(e))t[a]=r.toLocaleString("us-Us",{maximumFractionDigits:0});s(t)})),a("https://us-central1-techika.cloudfunctions.net/balance").then((e=>{let t={};for(const[a,r]of Object.entries(e))t[a]=parseFloat(r);m(t)}))}),[r]),e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex flex-wrap justify-content-left px-2 py-3"},e.createElement("div",{id:"latest",className:"me-3 border-start border-3 border-primary my-1",style:{width:"130px"}},e.createElement("div",{className:"card-body text-center"},e.createElement("h5",{className:"card-title"},"Price"),e.createElement("h4",{className:t?"text-success":"text-danger"},"$",r))),e.createElement("div",{id:"fluctuation",className:"me-3 border-start border-3 border-info my-1",style:{width:"130px"}},e.createElement("div",{className:"card-body text-center"},e.createElement("h5",{className:"card-title"},"Change"),e.createElement("h4",{className:"text-primary "},c," %"))),e.createElement("div",{id:"",className:"me-3 border-start border-3 border-success my-1",style:{width:"130px"}},e.createElement("div",{className:"card-body text-center"},e.createElement("h5",{className:"card-title"},"ETH "),e.createElement("h5",{className:"text-primary "},n.eth))),e.createElement("div",{id:"",className:"me-3 border-start border-3 border-primary my-1",style:{width:"130px"}},e.createElement("div",{className:"card-body text-center"},e.createElement("h5",{className:"card-title"},"Value "),e.createElement("h5",{className:"text-primary "},(parseFloat(n.eth)*parseInt(String(l.eth_bid).replaceAll(",",""))).toLocaleString("us-us",{maximumFractionDigits:0})))),e.createElement("div",{id:"",className:"me-3 border-start border-3 border-dark my-1",style:{width:"130px"}},e.createElement("div",{className:"card-body text-center"},e.createElement("h5",{className:"card-title"},"Ask"),e.createElement("h5",{className:"text-primary "},l.eth_ask))),e.createElement("div",{id:"",className:"me-3 border-start border-3 border-danger my-1",style:{width:"130px"}},e.createElement("div",{className:"card-body text-center"},e.createElement("h5",{className:"card-title"},"Bid"),e.createElement("h5",{className:"text-primary "},l.eth_bid)))))},c=()=>{const[t,c]=e.useState(0),[l,s]=e.useState(null),[n,m]=e.useState(null),[o,i]=e.useState(!0),[d,p]=e.useState(null);e.useEffect((()=>{const e=setInterval((()=>{c(t+1)}),1e4);return 0==t?u().then((e=>{i(!1),h(e),E(e)})):u().then((e=>{let t=parseFloat(e.price[e.price.length-1].toFixed(2))>=l;p(t),y(e,t)})),()=>{clearInterval(e)}}),[t]);const u=async()=>a("https://us-central1-techika.cloudfunctions.net/crypto"),h=e=>{let t=[{x:e.index.map((e=>new Date(e))),y:e.price,type:"scatter",mode:"lines+markers",marker:{color:"blue",size:3}}];Plotly.plot("chart",t,{title:"ETH/USD",xaxis:{showgrid:!0},yaxis:{showline:!0}})},E=e=>{let t=[];e.price.forEach((e=>{t.push(parseFloat(e))}));let a=Math.min.apply(Math,t),r=Math.max.apply(Math,t);m(((r-a)/a*100).toFixed(2)),s(parseFloat(e.price[e.price.length-1]).toFixed(2))},y=(e,t)=>{let a={x:[e.index.map((e=>new Date(e)))],y:[e.price],marker:{color:t?"green":"pink",size:3}};Plotly.restyle("chart",a),E(e)};return e.createElement("div",{className:"App mx-3"},o?e.createElement("h6",{className:"value animate__animated animate__flash animate__slow text-center"}," loading ..."):e.createElement(e.Fragment,null,e.createElement("div",{className:"row align-items-start"},e.createElement("div",{className:"cold-sm-6 col-md-10"},e.createElement(r,{upTrend:d,fluctuation:n,latestPrice:l}),e.createElement("div",{id:"chart",className:"p-0 m-0"})),e.createElement("div",{className:"col-sm-6 col-md-2"},e.createElement("div",{className:"animate__animated animate__fadeIn me-3 border-0"},e.createElement("div",{className:"card-body text-center"},e.createElement("h4",{className:"card-title text-info"},"News")))))))};t.render(e.createElement(e.StrictMode,null,e.createElement(c,null)),document.getElementById("root"));
